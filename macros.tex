% Environments
\newenvironment{codealign}{\footnotesize\csname align*\endcsname}{\csname endalign*\endcsname}

% Colors
\definecolor{colpol}{rgb}{0.6,0.6,0.7}
\definecolor{colprd}{rgb}{0.5,0.0,0.5}
\definecolor{colcon}{rgb}{0.0,0.5,0.5}
\definecolor{meta}{rgb}{0.2,0.2,0.2}

\newcommand{\colpol}[1]{\ensuremath{\textcolor{colpol}{#1}}}
\newcommand{\colprd}[1]{\ensuremath{\textcolor{colprd}{#1}}}
\newcommand{\colcon}[1]{\ensuremath{\textcolor{colcon}{#1}}}
\newcommand{\colmeta}[1]{\ensuremath{\textcolor{meta}{#1}}}

% Formalization-Commands
\newcommand{\Bool}{\textsc{Bool}}
\newcommand{\Int}{\textsc{Int}}
\newcommand{\by}{\ensuremath{\mathbf{by}}}
\newcommand{\Done}{\ensuremath{\mathbf{Done}}}

\newcommand*{\flip}[1]{\hat{#1}}

\newcommand{\wrap}[2][]{\,\overset{\textit{\tiny#2}}{\colon}#1\,}
\newcommand{\prd}{
  \wrap{\raisebox{0pt}{\colprd{\rule{0pt}{3pt}\smash{\mathfrak{prd}}}}}
}
\newcommand{\prdcon}{
  \wrap{\raisebox{0pt}{\ensuremath{\rule{0pt}{3pt}\smash{\colpol{o}}}}}
}
%\newcommand{\conprd}{
%  \wrap{\raisebox{0pt}{\ensuremath{\rule{0pt}{3pt}\smash{\flip{\colpol{o}}}}}}
%}
\newcommand{\con}{
  \wrap{\rule{0pt}{1pt}\colcon{\mathfrak{con}}}
}

\newcommand{\pol}{\colpol{o}}
\newcommand{\polprd}{\colprd{\mathfrak{prd}}}
\newcommand{\polcon}{\colcon{\mathfrak{con}}}

\newcommand{\mkCmd}{\mathrel{\gg}}

\newcommand{\cmd}{\ensuremath{\mathsf{cmd}}}

\newcommand{\stateprd}[3]{
  \ensuremath{
    \colmeta{\big\langle}
    #1\,\colmeta{\big\vert}\, #2\,\colmeta{\%}\, #3
    \colmeta{\big\rangle}
  }
}
\newcommand{\statecon}[2]{
  \ensuremath{
    \colmeta{\big\langle}
    #1\,\colmeta{\big\vert}\, #2
    \colmeta{\big\rangle}
  }
}
\newcommand{\semcmd}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\boxed{\triangleright}}\ #3}
}
\newcommand{\semtm}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\triangleright}\ #3}
}
\newcommand{\typetmprd}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\prd}\ #3}
}
\newcommand{\typetmcon}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\con}\ #3}
}
\newcommand{\typecmd}[2]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2}
}
\newcommand{\typewf}[1]{
  \ensuremath{\colmeta{\vdash}\ #1\ \colmeta{\text{Ok}}}
}
\newcommand{\liveness}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\text{live}}\ #3}
}

\newcommand{\manglecmd}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\boxed{\succ}}\ #3}
}

\newcommand{\mangletm}[3]{
  \ensuremath{#1\ \colmeta{\vdash}\ #2\ \colmeta{\succ}\ #3}
}

% Programming-Commands
\newcommand{\muconabs}[3]{\ensuremath{\mu(#1 \prd #2).#3}}

\newcommand{\FunXX}{\colcon{\textsc{Fun}}XX}
\newcommand{\Apply}{\colcon{\text{Apply}}}
\newcommand{\identity}{\colprd{\text{id}}}

\newcommand{\RecordX}{\colcon{\textsc{Record}}X}
\newcommand{\Get}{\colcon{\text{Get}}}
